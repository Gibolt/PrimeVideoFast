"use strict"

let playbackSpeed = 1
let lastChange = 0
const rateChange = 0.25
const GAP_BETWEEN_CHANGE_MS = 150
let playbackButtonPlus = null
let playbackButtonMinus = null
let playbackSpeedIndicator = null
let videoPlayer = null
let adChecker = null
let adCheckerSkippable = null
let preAdRate = null

const videoPlayerClass = "tst-video-overlay-player-html5"
const adIndicatorClass = "atvwebplayersdk-adtimeindicator-text"
const infoBarClass = "atvwebplayersdk-infobar-container"
const titleClass = "atvwebplayersdk-title-text"
const topButtonsContainerClass = "atvwebplayersdk-hideabletopbuttons-container"
const SKIP_TEXT = "Skip"
const IMDB_ICON = 'data:image/png;base64,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AAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAAgAwIAAAAACADAgAAAADIgAAAAAAAMiAAAAAA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'

const getImdbSearchUrl = (title) => `https://www.imdb.com/find?q=${title}`
const getImdbTitleUrl = (title) => {
	const id = getHashObjectFromTitle(title)?.imdbID
	return id ? `https://www.imdb.com/title/${id}` : undefined
}
const getImdbUrl = (title) => getImdbTitleUrl(title) ?? getImdbSearchUrl(title)
const getRtUrl = (title) => getHashObjectFromTitle(title)?.tomatoURL

const getHashIdFromTitle = (rawTitle) => {
	const title = cleanTitle(rawTitle)
	const hash = settings.get(Setting.OmdbResultsHash)
	if (!hash) return
	const hashId = Object.keys(hash).find(hashId => hashId.startsWith(title))
	return hashId
}

const getHashObjectFromTitle = (title) => {
	const hashId = getHashIdFromTitle(title)
	return settings.get(Setting.OmdbResultsHash)?.[hashId]
}

const buttons = `
	<div id="PlayBackRatePanel" class="PlayBackRatePanelFullScreen" style="display: inline; top: 2px; right: -44px; bottom: initial; left: initial;">
		<button id="SpeedUp" class="btn btn-right" style="float: right; border-top-right-radius: 5px; border-bottom-right-radius: 5px;">&gt;&gt;</button>
		<button id="PlayBackRate" class="btn" style="float: right">1.00</button>
		<button id="SpeedDown" class="btn btn-left" style="float: right; border-top-left-radius: 5px; border-bottom-left-radius: 5px;">&lt;&lt;</button>
	</div>`

const setupVideoPlaybackControl = function() {
	const click = C.Action.Click
	const video = getMainVideoPlayer()
	if (video === null || video === videoPlayer) {
		clearInterval(adChecker)
		clearInterval(adCheckerSkippable)
		adChecker = null
		adCheckerSkippable = null
		return
	}

    videoPlayer = video

	// Click + or - to change video playback speed
	document.addEventListener(C.Action.KeyDown, (event) => {
		const key = event.key

		if (key == "+" || key == "=") increaseRate()
		else if (key == "-") decreaseRate()
	})
	const buttonContainer = document.createElement('div')
	video.parentElement.prepend(buttonContainer)
	buttonContainer.outerHTML = buttons

	playbackButtonPlus = document.getElementById("SpeedUp")
	playbackSpeedIndicator = document.getElementById("PlayBackRate")
	playbackButtonMinus = document.getElementById("SpeedDown")

	playbackButtonPlus.addEventListener(click, increaseRate)
	playbackButtonMinus.addEventListener(click, decreaseRate)
	video.addEventListener(C.Event.Media.Play, () => {
		console.log("Video playback started")
		updateRate()
	})
	video.addEventListener(C.Event.Media.Playing, () => {
		console.log("Video now playing")
		updateRate()
	})
	video.addEventListener(C.Event.Media.DurationChange, () => {
		console.log("Video duration change")
		updateRate()
	})
	video.addEventListener(C.Event.Media.LoadStart, () => {
		console.log("Video load start")
		updateRate()
	})

	const titleElement = document.getElementsByClassName(titleClass)[0]
	if (titleElement?.innerText) {
		const title = titleElement.innerText
		const imdbUrl = getImdbUrl(title)
		const rtUrl = getRtUrl(title)
		titleElement?.addEventListener('click', () => window.open(imdbUrl,"_blank"))
		const imdbLogo = html.imgButton(IMDB_ICON, () => window.open(imdbUrl,"_blank"), 28)
		const rtLogo = html.imgButton(RT_IMAGE, () => window.open(rtUrl,"_blank"), 28)
		imdbLogo.style.marginRight = '26px'
		rtLogo.style.marginRight = '26px'
		const buttonContainer = document.getElementsByClassName(topButtonsContainerClass)[0]?.children[0]
		if (rtUrl) buttonContainer?.prepend(rtLogo)
		buttonContainer?.prepend(imdbLogo)
	}

	console.log('Adding Ad checkers')
	adChecker ??= setInterval(detectAndSkipAds, 2000)
	adCheckerSkippable ??= setInterval(detectAndSkipPreroll, 2000)

	updateRate()
}



const increaseRate = function() {
	if (!canUpdate()) return

	playbackSpeed += rateChange
	updateRate()
}

const decreaseRate = function() {
	if (!canUpdate()) return

	playbackSpeed -= rateChange
	if (playbackSpeed < 0) playbackSpeed = 0
	updateRate()
}

const updateRate = function() {
	console.log(videoPlayer)
	console.log("playbackSpeed: " + playbackSpeed)
	if (videoPlayer !== null) videoPlayer.playbackRate = playbackSpeed
	if (playbackSpeedIndicator !== null) playbackSpeedIndicator.innerText = playbackSpeed
}

const canUpdate = function() {
	const now = Date.now()
	const canChange = (now > lastChange + GAP_BETWEEN_CHANGE_MS)
	if (canChange) lastChange = now
	return canChange
}

const detectAndSkipAds = () => {
	if (preAdRate !== null) return
	const indicator = document.getElementsByClassName(adIndicatorClass)[0]?.textContent ?? ""
	if (!indicator) return
	const adLengthSec = indicator.match(/\d+/)?.[0] ?? 0
	if (adLengthSec <= 2) return

	const timeDelayMs = (adLengthSec - 2) * 100
	preAdRate = playbackSpeed
	playbackSpeed = 10
	updateRate()
	setTimeout(() => {
		playbackSpeed = preAdRate
		preAdRate = null
		updateRate()
	}, timeDelayMs)
}

const detectAndSkipPreroll = () => {
	const infoBar = document.getElementsByClassName(infoBarClass)[0]

	const items = [infoBar];
	let item = null
	do {
		item = items.pop()
		if (!item) continue
		const text = item.innerText
		if (text === SKIP_TEXT) break
		if (!text.includes(SKIP_TEXT)) continue
		items.push(...item.children)
	} while (items.length)
	if (!item) return
	console.log('Found skip: ', item)
	setTimeout(() => item?.click(), 2000)
}

//.btn {
//    font-size: 12px;
//    background: rgba(255, 255, 255, 0.5);
//    padding: 5px;
//    text-decoration: none;
//    border-width: 0px;
//    border-style: initial;
//    border-color: initial;
//    border-image: initial;
//}

const getMainVideoPlayer = () => {
	const videos = document.getElementsByTagName('video')
	if (videos.length === 0) return null

	for (const video of videos) {
		if (video.className.includes(videoPlayerClass)) continue
		return video
	}
	return null
}

const runMainFunctionRepeatedly = function() {
	setInterval(() => {
        setupVideoPlaybackControl()
    }, 5000)
	storage.load(() => playbackSpeed = settings.get(Setting.InitialPlaybackSpeed))
}

runMainFunctionRepeatedly()
